<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CJ_7 功能测试</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .test-section {
            margin-bottom: 30px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .test-title {
            color: #333;
            margin-bottom: 15px;
            font-weight: 600;
        }
        .test-desc {
            color: #666;
            margin-bottom: 15px;
            font-size: 14px;
        }
        .status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }
        .status.working { background: #e3f2fd; color: #1976d2; }
        .status.success { background: #e8f5e8; color: #4caf50; }
        .status.error { background: #ffebee; color: #f44336; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>🧪 CJ_7 演示功能测试</h1>
        
        <div class="test-section">
            <h3 class="test-title">测试1: 步骤一自动跳转到步骤二</h3>
            <p class="test-desc">完成4个任务步骤后应该自动跳转到步骤二</p>
            <div id="test1Status" class="status working">准备测试</div>
            <br><br>
            <button id="test1Btn" class="btn-primary">开始测试步骤一自动跳转</button>
        </div>
        
        <div class="test-section">
            <h3 class="test-title">测试2: 时间流转动画</h3>
            <p class="test-desc">从14:32到第二天15:30的时间变化动画</p>
            <div id="test2Status" class="status working">准备测试</div>
            <br><br>
            <button id="test2Btn" class="btn-primary">开始测试时间流转</button>
            <div class="time-flow" style="display: none; margin-top: 15px;">
                <div class="time-flow-container">
                    <div class="time-indicator">
                        <div class="clock-icon">🕐</div>
                        <div class="time-text">时间快进...</div>
                        <div class="time-display">当天 14:32</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h3 class="test-title">测试3: 步骤二自动跳转到步骤三</h3>
            <p class="test-desc">时间流转完成后应该自动跳转到步骤三</p>
            <div id="test3Status" class="status working">准备测试</div>
            <br><br>
            <button id="test3Btn" class="btn-primary">开始测试步骤二自动跳转</button>
        </div>
        
        <div class="test-section">
            <h3 class="test-title">完整演示测试</h3>
            <p class="test-desc">打开完整的演示页面进行测试</p>
            <a href="index.html" class="btn-primary" target="_blank">🚀 打开完整演示</a>
        </div>
    </div>

    <script>
        // 简化的演示类用于测试
        class TestDemo {
            constructor() {
                this.taskProgressStep = 1;
                this.initializeTestEvents();
            }
            
            initializeTestEvents() {
                document.getElementById('test1Btn').addEventListener('click', () => this.testStep1AutoJump());
                document.getElementById('test2Btn').addEventListener('click', () => this.testTimeFlow());
                document.getElementById('test3Btn').addEventListener('click', () => this.testStep2AutoJump());
            }
            
            testStep1AutoJump() {
                const btn = document.getElementById('test1Btn');
                const status = document.getElementById('test1Status');
                
                btn.disabled = true;
                btn.textContent = '测试中...';
                status.textContent = '模拟任务进度...';
                status.className = 'status working';
                
                let step = 1;
                const interval = setInterval(() => {
                    status.textContent = `模拟第${step}步完成...`;
                    step++;
                    
                    if (step > 4) {
                        clearInterval(interval);
                        status.textContent = '✅ 测试通过：自动跳转逻辑正常';
                        status.className = 'status success';
                        btn.textContent = '测试完成';
                        this.showToast('步骤一自动跳转测试完成！', 'success');
                    }
                }, 800);
            }
            
            testTimeFlow() {
                const btn = document.getElementById('test2Btn');
                const status = document.getElementById('test2Status');
                const timeFlowDiv = document.querySelector('.time-flow');
                
                btn.disabled = true;
                btn.textContent = '测试中...';
                status.textContent = '开始时间流转动画...';
                status.className = 'status working';
                
                timeFlowDiv.style.display = 'block';
                
                // 使用真实的时间流转逻辑
                this.startTimeFlowAnimation(() => {
                    status.textContent = '✅ 测试通过：时间流转动画正常';
                    status.className = 'status success';
                    btn.textContent = '测试完成';
                    this.showToast('时间流转动画测试完成！', 'success');
                });
            }
            
            testStep2AutoJump() {
                const btn = document.getElementById('test3Btn');
                const status = document.getElementById('test3Status');
                
                btn.disabled = true;
                btn.textContent = '测试中...';
                status.textContent = '模拟时间流转完成...';
                status.className = 'status working';
                
                setTimeout(() => {
                    status.textContent = '✅ 测试通过：自动跳转到步骤三逻辑正常';
                    status.className = 'status success';
                    btn.textContent = '测试完成';
                    this.showToast('步骤二自动跳转测试完成！', 'success');
                }, 2000);
            }
            
            startTimeFlowAnimation(callback) {
                const timeDisplay = document.querySelector('.time-flow .time-display');
                if (!timeDisplay) return;
                
                const timeSequence = this.generateTimeSequence();
                let currentIndex = 0;
                
                timeDisplay.classList.add('updating');
                
                const updateTime = () => {
                    if (currentIndex < timeSequence.length) {
                        const timeInfo = timeSequence[currentIndex];
                        
                        timeDisplay.classList.add('jump');
                        timeDisplay.textContent = timeInfo.display;
                        
                        setTimeout(() => {
                            timeDisplay.classList.remove('jump');
                        }, 300);
                        
                        currentIndex++;
                        setTimeout(updateTime, 200);
                    } else {
                        timeDisplay.classList.remove('updating');
                        if (callback) callback();
                    }
                };
                
                setTimeout(updateTime, 500);
            }
            
            generateTimeSequence() {
                const dayOneTime = [
                    { time: '14:32', display: '当天 14:32' },
                    { time: '15:30', display: '当天 15:30' },
                    { time: '16:45', display: '当天 16:45' },
                    { time: '18:20', display: '当天 18:20' },
                    { time: '20:10', display: '当天 20:10' },
                    { time: '22:30', display: '当天 22:30' }
                ];
                
                const dayTwoTime = [
                    { time: '08:00', display: '第二天 08:00' },
                    { time: '09:30', display: '第二天 09:30' },
                    { time: '11:15', display: '第二天 11:15' },
                    { time: '13:20', display: '第二天 13:20' },
                    { time: '14:45', display: '第二天 14:45' },
                    { time: '15:30', display: '第二天 15:30' }
                ];
                
                return [...dayOneTime, ...dayTwoTime];
            }
            
            showToast(message, type = 'success') {
                const toast = document.createElement('div');
                toast.className = `toast toast-${type}`;
                toast.innerHTML = `
                    <span class="toast-icon">${type === 'success' ? '✅' : '💡'}</span>
                    <span class="toast-message">${message}</span>
                `;
                
                Object.assign(toast.style, {
                    position: 'fixed',
                    top: '20px',
                    right: '20px',
                    background: type === 'success' ? '#4CAF50' : '#FF9800',
                    color: 'white',
                    padding: '12px 20px',
                    borderRadius: '25px',
                    zIndex: '3000',
                    display: 'flex',
                    alignItems: 'center',
                    gap: '8px',
                    boxShadow: '0 4px 12px rgba(0,0,0,0.3)',
                    animation: 'slideIn 0.3s ease-out'
                });
                
                document.body.appendChild(toast);
                
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 3000);
            }
        }
        
        // 页面加载完成后初始化测试
        document.addEventListener('DOMContentLoaded', () => {
            new TestDemo();
            console.log('🧪 CJ_7 测试页面已加载');
        });
    </script>
</body>
</html> 