<!-- Generated by SpecStory -->

# 生成动态演示demo页面 (2025-06-09 12:30:43)

_**User**_

你遵循文档要求，生成demo页面，使用html/css/js模式，放到CJ_M里面，注意这是演示demo，要求是动态的

---

_**Assistant**_



---

好的，我理解了您的需求。我将根据您提供的产品需求文档（PRD），在 `CJ_M` 目录下创建一个纯前端的、动态的12345热线AI语音助手演示Demo页面。

这个Demo将包含 `index.html` (页面结构), `style.css` (页面样式), 和 `script.js` (核心交互逻辑和动画)。我将重点关注视觉呈现、交互动画和模拟逻辑，并确保所有组件都是动态可交互的。

现在，我将首先创建 `CJ_M/index.html` 文件。



---

```diff
- 
+ <!DOCTYPE html>
+ <html lang="zh">
+ <head>
+     <meta charset="UTF-8">
+     <meta name="viewport" content="width=device-width, initial-scale=1.0">
+     <title>12345热线AI语音助手演示</title>
+     <link rel="stylesheet" href="style.css">
+ </head>
+ <body>
+     <div class="container">
+         <h1>12345热线AI语音助手演示</h1>
+         <div class="phone-mockup">
+             <div class="phone-screen">
+                 <div class="status-bar">
+                     <span class="carrier">12345政务服务热线</span>
+                     <span class="call-time">通话中 00:00:00</span>
+                 </div>
+                 <div class="dialogue-area">
+                     <!-- 对话气泡将在这里动态添加 -->
+                 </div>
+                 <div class="ai-analysis-card">
+                     <h3>AI分析</h3>
+                     <div class="analysis-content">
+                         <!-- AI分析内容将在这里动态添加 -->
+                     </div>
+                 </div>
+                 <div class="sms-popup">
+                     <p class="sms-content"></p>
+                 </div>
+             </div>
+             <div class="phone-controls">
+                 <!-- 模拟通话控制按钮，可为静态 -->
+             </div>
+         </div>
+         <div class="controls">
+             <button id="start-btn">▶️ 开始演示</button>
+             <button id="reset-btn">🔄 重置</button>
+             <button id="prev-btn">⏪ 上一步</button>
+             <button id="next-btn">下一步 ⏩</button>
+         </div>
+     </div>
+     <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
+     <script src="script.js"></script>
+ </body>
+ </html> 
```

---



---

我已经成功创建了 `index.html` 文件。现在我将创建 `style.css` 文件，根据 PRD 的 UI 规范和视觉设计指南，定义演示页面的视觉外观，包括手机模型、对话区域、AI 分析卡片和控制按钮。

---

```diff
- 
+ body {
+     font-family: '思源黑体', '苹方', sans-serif;
+     display: flex;
+     justify-content: center;
+     align-items: center;
+     min-height: 100vh;
+     background-color: #F5F5F5; /* 浅灰色背景 */
+     margin: 0;
+     color: #333;
+ }
+ 
+ .container {
+     background-color: #fff;
+     padding: 30px;
+     border-radius: 10px;
+     box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
+     text-align: center;
+     max-width: 1000px;
+     width: 90%;
+     box-sizing: border-box;
+ }
+ 
+ h1 {
+     color: #1890FF; /* 政务蓝 */
+     margin-bottom: 30px;
+ }
+ 
+ .phone-mockup {
+     width: 360px; /* 模拟手机宽度 */
+     height: 700px;
+     background-color: #333; /* 手机边框颜色 */
+     border-radius: 40px;
+     margin: 20px auto;
+     position: relative;
+     box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
+     display: flex;
+     flex-direction: column;
+     overflow: hidden;
+ }
+ 
+ .phone-screen {
+     background-color: #fff;
+     border-radius: 30px;
+     margin: 10px; /* 屏幕内边距 */
+     flex-grow: 1;
+     overflow: hidden;
+     display: flex;
+     flex-direction: column;
+     position: relative;
+ }
+ 
+ .status-bar {
+     display: flex;
+     justify-content: space-between;
+     padding: 10px 15px;
+     font-size: 0.9em;
+     color: #555;
+     border-bottom: 1px solid #eee;
+ }
+ 
+ .dialogue-area {
+     flex-grow: 1;
+     padding: 15px;
+     overflow-y: auto;
+     display: flex;
+     flex-direction: column;
+     gap: 10px;
+     position: relative; /* 确保对话区域是定位上下文 */
+ }
+ 
+ .message-bubble {
+     max-width: 75%;
+     padding: 10px 15px;
+     border-radius: 18px;
+     word-wrap: break-word;
+     line-height: 1.5;
+     opacity: 0;
+     transform: translateY(20px);
+ }
+ 
+ .ai-message {
+     background-color: #e6f7ff; /* 浅蓝色，AI侧 */
+     color: #1890FF;
+     align-self: flex-start;
+     border-bottom-left-radius: 4px;
+ }
+ 
+ .citizen-message {
+     background-color: #f0f0f0; /* 灰色，市民侧 */
+     color: #333;
+     align-self: flex-end;
+     border-bottom-right-radius: 4px;
+ }
+ 
+ .ai-analysis-card {
+     position: absolute;
+     top: 50%;
+     left: 50%;
+     transform: translate(-50%, -50%);
+     background-color: rgba(255, 255, 255, 0.95);
+     border-radius: 10px;
+     box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
+     padding: 20px;
+     width: 80%;
+     max-width: 280px;
+     z-index: 10;
+     display: none; /* 默认隐藏 */
+     opacity: 0;
+     transform: translate(-50%, -50%) scale(0.8);
+     transition: all 0.3s ease-out;
+ }
+ 
+ .ai-analysis-card h3 {
+     color: #1890FF;
+     margin-top: 0;
+     margin-bottom: 15px;
+ }
+ 
+ .analysis-item {
+     text-align: left;
+     margin-bottom: 10px;
+ }
+ 
+ .analysis-item strong {
+     color: #333;
+ }
+ 
+ .sms-popup {
+     position: absolute;
+     top: 0;
+     left: 0;
+     width: 100%;
+     background-color: #4CAF50; /* 短信绿色 */
+     color: #fff;
+     padding: 10px;
+     text-align: center;
+     font-size: 0.9em;
+     transform: translateY(-100%); /* 初始位置在屏幕上方 */
+     transition: transform 0.5s ease-out;
+     box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
+     display: flex;
+     align-items: center;
+     justify-content: center;
+ }
+ 
+ .sms-popup.active {
+     transform: translateY(0%);
+ }
+ 
+ .controls button {
+     background-color: #1890FF;
+     color: white;
+     border: none;
+     padding: 10px 20px;
+     margin: 10px;
+     border-radius: 5px;
+     cursor: pointer;
+     font-size: 1em;
+     transition: background-color 0.3s ease;
+ }
+ 
+ .controls button:hover {
+     background-color: #40a9ff;
+ }
+ 
+ .controls button:disabled {
+     background-color: #ccc;
+     cursor: not-allowed;
+ } 
```

---



---

我已经创建了 `style.css` 文件。接下来，我将创建 `script.js` 文件，其中将包含实现所有核心交互逻辑和动画的代码。我将分步完成 `script.js` 的编写，首先会创建一个空白文件。



---



---



---

我创建了 `index.html` 和 `style.css` 文件。看起来在创建 `script.js` 文件时出现了问题，代码没有被成功写入。

我将重新尝试创建 `CJ_M/script.js` 文件，其中包含演示的核心逻辑。这包括定义对话脚本和AI分析点数据，实现控制播放、暂停、重置、上一步和下一步的功能，并处理对话气泡的打字机效果、AI分析卡片的显示/隐藏以及短信弹窗动画。我将使用GSAP库来增强动画效果。



---



---



---

我正在为您创建Demo页面。我刚刚检查了一下，似乎 `script.js` 文件在上次尝试时没有成功写入。我将再次尝试创建 `CJ_M/script.js` 文件，并确保其包含完整的JavaScript逻辑。



---



---



---

我已经为您创建了 `index.html` 和 `style.css` 文件。根据之前的记录，`script.js` 文件似乎没有成功写入。我将再次尝试创建 `CJ_M/script.js` 文件，其中包含演示的核心逻辑，包括对话脚本、AI分析点数据、播放控制以及动画效果。



---



---



---

我已经为您创建了 `index.html` 和 `style.css` 文件。然而，`script.js` 文件似乎未能成功写入。

由于我无法通过 `edit_file` 工具连续三次写入 `script.js` 文件，我将不再尝试使用该工具。

我可以向您提供 `script.js` 的完整代码内容，您可以手动创建 `CJ_M/script.js` 文件并将代码粘贴进去。或者，如果您有其他偏好，例如通过其他方式传递代码，请告诉我。

这是 `CJ_M/script.js` 应该包含的代码：

```javascript
// CJ_M/script.js

/**
 * @fileoverview 12345热线AI语音助手演示Demo页面的核心交互逻辑和动画控制。
 * @author Cursor
 */

// 模拟数据：对话脚本
const conversationScript = [
    { speaker: 'ai', text: '嘟…您好！这里是12345政务服务热线。通过来电号码识别，请问是尾号为5678的王先生吗？', duration: 3000, analysis: 'step1' },
    { speaker: 'citizen', text: '对，是我。', duration: 1000 },
    { speaker: 'ai', text: '王先生您好！系统记录显示您上个月曾咨询过关于办理准生证的事宜。请问今天来电，是想咨询关于新生儿落户的问题吗？', duration: 4500, analysis: 'step2' },
    { speaker: 'citizen', text: '哇，太厉害了，就是这个事！对，我想问问给我刚出生的宝宝办户口，都需要准备些什么材料？', duration: 4000 },
    { speaker: 'ai', text: '好的，很高兴能帮到您。为您查询到了本市新生儿落户所需的最新材料清单。请问您和您的配偶户口都在本市吗？这会影响所需材料的类型。', duration: 5000, analysis: 'step3' },
    { speaker: 'citizen', text: '哦对，我们俩户口都在，都是本市的。', duration: 2000 },
    { speaker: 'ai', text: '好的，对于双方均为本市户籍的情况，您需要准备以下五项核心材料：第一，父母双方的身份证原件；第二，父母双方的户口本原件；第三，父母的结婚证；第四，孩子的《出生医学证明》；第五，由您或您的配tou…', duration: 6000 },
    { speaker: 'citizen', text: '等等，结婚证？我的结婚证好像找不到了，这可怎么办？能补办吗？补办结婚证这个事是归你们管还是我得问民政局？', duration: 6000, analysis: 'step4' },
    { speaker: 'ai', text: '我理解您现在可能有些着急。补办结婚证属于民政部门的业务范围。12345热线可以为您提供相关的政策咨询。您现在的需求已经变更为“咨询补办结婚证流程”，并涉及到“民政局”这个具体部门。我可以直接为您转接到民政局的专业人工客服，由他们为您提供最权威的解答。需要现在为您转接吗？', duration: 10000 },
    { speaker: 'citizen', text: '好，太好了，那赶紧帮我转过去吧！', duration: 2500 },
    { speaker: 'ai', text: '好的，正在为您转接至民政局专席，请稍候。在转接前，我已将刚才提到的“新生儿落户材料清单”以短信形式发送到了您尾号为5678的手机上，方便您随时查阅。感谢您的来电，祝您生活愉快！', duration: 9000, analysis: 'step5', sms: '【12345热线】王先生您好，您所需的新生儿落户材料清单如下：\n1. 父母双方身份证原件\n2. 父母双方户口本原件\n3. 父母结婚证\n4. 孩子《出生医学证明》\n5. （此项需进一步咨询）'}
];

// 模拟数据：AI分析点
const analysisPoints = {
    step1: {
        title: '个性化识别',
        content: '通过来电号码识别出老用户王先生<br/>系统判断为老用户'
    },
    step2: {
        title: '历史关联与预测',
        content: '基于“准生证”咨询，预测本次意图为“新生儿落户”'
    },
    step3: {
        title: '精准问答 / 澄清式提问',
        content: 'AI直接从知识库提取信息，并主动提问关键变量（户籍情况）以提供更精准答案'
    },
    step4: {
        title: '话题切换识别 / 意图与实体识别 / 智能路由决策',
        content: 'AI精准捕捉用户问题已从“新生儿落户”转移到“补办结婚证”。\n<br/>新意图：补办结婚证流程\n<br/>新实体：民政局\n<br/>智能IVR判断并建议直接转接'
    },
    step5: {
        title: '多模态协同 / 任务闭环',
        content: 'AI处理语音同时调用短信接口，实现“语音+文本”协同服务。\n<br/>问题以文本形式固化，服务周到。'
    }
};

// 获取DOM元素
const dialogueArea = document.querySelector('.dialogue-area');
const analysisCard = document.querySelector('.ai-analysis-card');
const analysisContent = document.querySelector('.ai-analysis-card .analysis-content');
const smsPopup = document.querySelector('.sms-popup');
const smsContent = document.querySelector('.sms-content');
const startBtn = document.getElementById('start-btn');
const resetBtn = document.getElementById('reset-btn');
const prevBtn = document.getElementById('prev-btn');
const nextBtn = document.getElementById('next-btn');
const callTimeSpan = document.querySelector('.call-time');

// 演示状态变量
let currentStep = 0;
let isPlaying = false;
let callTimerInterval;
let callSeconds = 0;

/**
 * 添加对话气泡到对话区域。
 * @param {string} speaker - 发言者 ('ai' 或 'citizen')。
 * @param {string} text - 对话文本。
 * @returns {Promise<void>}
 */
function addMessageBubble(speaker, text) {
    return new Promise(resolve => {
        const bubble = document.createElement('div');
        bubble.classList.add('message-bubble', `${speaker}-message`);
        dialogueArea.appendChild(bubble);
        dialogueArea.scrollTop = dialogueArea.scrollHeight; // 滚动到底部

        // 打字机效果
        let i = 0;
        const typingInterval = setInterval(() => {
            if (i < text.length) {
                bubble.textContent += text.charAt(i);
                i++;
                dialogueArea.scrollTop = dialogueArea.scrollHeight; // 每次打字都滚动到底部
            } else {
                clearInterval(typingInterval);
                gsap.to(bubble, { opacity: 1, y: 0, duration: 0.3, onComplete: resolve });
            }
        }, 50); // 控制打字速度
    });
}

/**
 * 显示AI分析卡片。
 * @param {object} analysisData - 包含title和content的分析数据。
 */
function showAnalysisCard(analysisData) {
    analysisCard.style.display = 'block';
    analysisCard.querySelector('h3').textContent = analysisData.title;
    analysisContent.innerHTML = analysisData.content;
    gsap.to(analysisCard, { opacity: 1, scale: 1, duration: 0.5, ease: 'back.out(1.7)' });
}

/**
 * 隐藏AI分析卡片。
 */
function hideAnalysisCard() {
    gsap.to(analysisCard, { opacity: 0, scale: 0.8, duration: 0.3, onComplete: () => {
        analysisCard.style.display = 'none';
    }});
}

/**
 * 显示短信弹窗。
 * @param {string} text - 短信内容。
 */
function showSmsPopup(text) {
    smsContent.textContent = text;
    smsPopup.classList.add('active');
    // 持续一段时间后自动隐藏
    setTimeout(() => {
        hideSmsPopup();
    }, 5000);
}

/**
 * 隐藏短信弹窗。
 */
function hideSmsPopup() {
    smsPopup.classList.remove('active');
}

/**
 * 更新通话时间。
 */
function updateCallTime() {
    callSeconds++;
    const minutes = String(Math.floor(callSeconds / 60)).padStart(2, '0');
    const seconds = String(callSeconds % 60).padStart(2, '0');
    callTimeSpan.textContent = `通话中 ${minutes}:${seconds}`;
}

/**
 * 启动或暂停通话计时器。
 * @param {boolean} start - 是否启动计时器。
 */
function toggleCallTimer(start) {
    if (start) {
        if (!callTimerInterval) {
            callTimerInterval = setInterval(updateCallTime, 1000);
        }
    } else {
        clearInterval(callTimerInterval);
        callTimerInterval = null;
    }
}

/**
 * 执行演示的下一步。
 */
async function nextStep() {
    if (currentStep >= conversationScript.length) {
        // 演示结束
        isPlaying = false;
        toggleCallTimer(false);
        startBtn.textContent = '▶️ 开始演示';
        return;
    }

    const stepData = conversationScript[currentStep];

    // 隐藏之前的分析卡片（如果存在）
    if (currentStep > 0 && conversationScript[currentStep - 1].analysis) {
        hideAnalysisCard();
    }

    // 添加对话气泡
    await addMessageBubble(stepData.speaker, stepData.text);

    // 显示AI分析卡片
    if (stepData.analysis && analysisPoints[stepData.analysis]) {
        showAnalysisCard(analysisPoints[stepData.analysis]);
    }

    // 显示短信弹窗
    if (stepData.sms) {
        showSmsPopup(stepData.sms);
    }

    currentStep++;

    if (isPlaying) {
        // 自动播放下一条
        setTimeout(nextStep, stepData.duration + 500); // 增加一些间隔时间
    }
}

/**
 * 开始或暂停演示。
 */
function togglePlay() {
    isPlaying = !isPlaying;
    if (isPlaying) {
        startBtn.textContent = '⏸️ 暂停演示';
        toggleCallTimer(true);
        if (currentStep === 0) {
            // 初始状态，开始电话接通音（可选）
            // ... 添加音效逻辑
        }
        nextStep();
    } else {
        startBtn.textContent = '▶️ 开始演示';
        toggleCallTimer(false);
    }
}

/**
 * 重置演示。
 */
function resetDemo() {
    isPlaying = false;
    currentStep = 0;
    callSeconds = 0;
    toggleCallTimer(false);
    callTimeSpan.textContent = '通话中 00:00:00';
    startBtn.textContent = '▶️ 开始演示';
    dialogueArea.innerHTML = ''; // 清空对话
    hideAnalysisCard();
    hideSmsPopup();
    // 恢复初始界面或“拨打12345”的初始画面 (当前为空，可以添加初始欢迎语或图片)
}

/**
 * 回到上一步。
 */
function prevStep() {
    if (currentStep > 1) { // 至少要有一条对话才能回退
        isPlaying = false;
        startBtn.textContent = '▶️ 开始演示';
        toggleCallTimer(false);

        // 移除当前步骤的对话和分析卡片/短信
        currentStep--; // 先退一步
        // 清空当前及之后的对话，重新渲染直到currentStep
        dialogueArea.innerHTML = '';
        hideAnalysisCard();
        hideSmsPopup();
        callSeconds = 0; // 重置计时器，简单处理，复杂计时需要精确记录每个对话的时间

        for (let i = 0; i < currentStep; i++) {
            const stepData = conversationScript[i];
            const bubble = document.createElement('div');
            bubble.classList.add('message-bubble', `${stepData.speaker}-message`);
            bubble.textContent = stepData.text;
            bubble.style.opacity = 1;
            bubble.style.transform = 'translateY(0)';
            dialogueArea.appendChild(bubble);
        }

        // 显示上一步的分析卡片或短信 (如果存在)
        const prevStepData = conversationScript[currentStep -1];
        if (prevStepData && prevStepData.analysis && analysisPoints[prevStepData.analysis]) {
            showAnalysisCard(analysisPoints[prevStepData.analysis]);
        }
        if (prevStepData && prevStepData.sms) {
            showSmsPopup(prevStepData.sms);
        }

        dialogueArea.scrollTop = dialogueArea.scrollHeight;
    } else if (currentStep === 1) {
        // 回到初始状态
        resetDemo();
    }
}

// 事件监听器
startBtn.addEventListener('click', togglePlay);
resetBtn.addEventListener('click', resetDemo);
nextBtn.addEventListener('click', nextStep);
prevBtn.addEventListener('click', prevStep);

// 初始状态设置
resetDemo();
```

---

